---
import Button from "@components/elements/button/button.astro";
import Heading from "@components/typography/heading/heading.astro";
import SimpleText from "@components/typography/simple-text/simple-text.astro";
import ButtonGroup from "@components/wrappers/button-group/button-group.astro";
import Card from "@components/wrappers/card/card.astro";
import GridItem from "@components/wrappers/grid/grid-item.astro";
import Grid from "@components/wrappers/grid/grid.astro";
import personaCtaData from "../../../data/persona-cta.json";

const { colorScheme = "default" } = Astro.props;

interface Persona {
  image: string;
  alt: string;
  heading: string;
  text: string;
  link: {
    text: string;
    url: string;
  };
}
---

<Grid class="persona-cta" minItemWidth="280" maxItemWidth="400" gap="xl" editable={false}>
  {
    personaCtaData.map((persona: Persona) => (
      <GridItem>
        <Card
          editable={false}
          colorScheme={colorScheme}
          backgroundColor="base"
          rounded={true}
          paddingHorizontal="lg"
          paddingVertical="lg"
          beforeContentBlocks={[
            {
              _component: "elements/smart-image",
              source: persona.image,
              alt: persona.alt,
              editable: false,
              widths: [176, 352, 704],
              sizes: "(min-width: 400px) 352px, 100vw",
            },
          ]}
        >
          <Heading level="h3">{persona.heading}</Heading>
          <SimpleText>{persona.text}</SimpleText>
          <ButtonGroup direction="column" alignX="start">
            <Button
              text={persona.link.text}
              href={persona.link.url}
              variant="text"
              iconName="arrow-right"
              iconPosition="after"
            />
          </ButtonGroup>
        </Card>
      </GridItem>
    ))
  }
</Grid>
