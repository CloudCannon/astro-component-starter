---
import DefinitionListItem from "./DefinitionListItem.astro";

const {
  items,
  alignX = "start",
  class: className,
  "data-prop": customDataProp = "items",
  editable = true,
  _component,
  ...htmlAttributes
} = Astro.props;

const arrayDataAttributes = editable
  ? {
      "data-editable": "array",
      "data-prop": customDataProp,
      "data-component": "building-blocks/core-elements/definition-list/definition-list-item",
    }
  : {};
const hasItems = items?.length > 0;
const hasSlotContent = Astro.slots.has("default");

if (!_component && !hasItems && !hasSlotContent) return;
---

<dl
  class:list={["definition-list", `alignment-${alignX}`, className]}
  {...htmlAttributes}
>
  <div class="definition-list-items" {...editable ? arrayDataAttributes : {}}>
    <slot>
      {
        items &&
          items.length > 0 &&
          items.map((item: any) => (
            <DefinitionListItem
              data-editable="array-item"
              title={item.title}
              text={item.text}
              editable={editable}
            />
          ))
      }
    </slot>
  </div>
</dl>

<style lang="pcss" is:global>
  @layer components {
    .definition-list {
      display: grid;
      gap: var(--spacing-em-sm) var(--spacing-em-md);
      grid-template-columns: auto 1fr;
      margin: 0;
      margin-top: var(--spacing-lg);

      &.alignment-center {
        align-items: center;
        grid-template-columns: 1fr 1fr;
        justify-content: center;

        .title {
          text-align: end;
        }
      }

      &.alignment-end {
        align-items: end;
        grid-template-columns: auto auto;
        justify-content: end;

        .title {
          text-align: start;
        }

        .content {
          text-align: end;
        }
      }

      .content {
        margin: 0;
      }
    }

    .definition-list-items {
      display: contents;
    }
  }
</style>
