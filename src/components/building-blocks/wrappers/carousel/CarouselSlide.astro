---
import Component from "@components/utils/renderBlock.astro";
import { hasMeaningfulSlotContent } from "@components/utils/slotContent";

const { contentSections = [], editable = true, _component, ...htmlAttributes } = Astro.props;
const hasDefaultSlot = await hasMeaningfulSlotContent(Astro.slots);
const usesContentSections = !hasDefaultSlot;
---

<div
  class="slide"
  role="group"
  data-editable={editable && usesContentSections ? "array" : undefined}
  data-prop="contentSections"
  {...htmlAttributes}
>
  <slot>
    {
      contentSections && contentSections.length > 0 && (
        <Component contentSections={contentSections} editable={editable} />
      )
    }
  </slot>
</div>

<style lang="pcss" is:global>
  @layer components {
    .slide {
    flex-shrink: 0;
    flex-basis: calc(max(var(--slide-width, 100%), var(--min-slide-width, 0px)));
    container-type: inline-size;

    > [data-editable="array-item"]:first-child > *:first-child,
    > :not([data-editable="array-item"]):first-child {
      margin-top: 0 !important;
    }
  }
  }
</style>
