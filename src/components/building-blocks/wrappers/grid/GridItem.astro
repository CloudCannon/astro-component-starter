---
import RenderBlock from "@components/utils/renderBlock.astro";

const {
  contentSections,
  editable = true,
  class: className,
  _component,
  ...htmlAttributes
} = Astro.props;

const hasDefaultSlot = Astro.slots.has("default");
const usesContentSections = !hasDefaultSlot;
---

<div class:list={["grid-item", className]} {...htmlAttributes}>
  <div
    class="grid-item-content"
    data-editable={editable ? "array" : undefined}
    data-prop="contentSections"
  >
    <slot>
      {
        contentSections && contentSections.length > 0 && (
          <RenderBlock
            contentSections={contentSections}
            propName="contentSections"
            editable={editable}
          />
        )
      }
    </slot>
  </div>
</div>

<style lang="pcss" is:global>
  @layer components {
    .grid-item {
      height: 100%;
      container-type: inline-size;
      > .grid-item-content {
        height: 100%;
      }

      > .grid-item-content > *:only-child {
        height: 100%;
      }

      > .grid-item-content > *:first-child {
        margin-top: 0 !important;
      }
    }
  }
</style>
